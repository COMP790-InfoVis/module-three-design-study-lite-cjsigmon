---
title: "Social factors in access to food and policy recommendation"
output: html_document
date: "`r Sys.Date()`"
author: "Caleb Sigmon"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(readr)
library(tidyverse)
library(janitor)
library(gcookbook)
food_access <- clean_names(read_csv("food_access.csv"))
```

## Precondition

### Learning
The US Department of Agriculture data from 2021 records number of people by county and breaks them into their counts for different categories of distance from a supermarket. This includes additional dividing categories like the number of people by distance that are low income, that don't have car access, that have children, and that are senior citizens. Race is not included. 

Findings from Feed America https://www.feedingamerica.org/sites/default/files/2021-03/National%20Projections%20Brief_3.9.2021_0.pdf show that there are some alarming—though not entirely unexpected—trends between races. One in 12 white non-hispanic people in the data lived in a food-insecure household. For Latino people the number is one in six, for Black people it's one in five, and most drastically of all, for Native American people the number is one in four.

One explanation is the poverty rates among Native American peoples. The most recent report on poverty by the US Administration for Native Americans is from 2012 and states "The poverty rate for American Indians living on reservations is 29.4 percent compared with the U.S. national average of 15.3 percent.  The reservation poverty rate for Indian families is 36 percent, compared to the national family poverty rate of 9.2 percent." So Native Americans' economic status is not favorable, especially when grouped by families.

Move for Hunger additonally states "There are a total of 28 counties in America that are majority Native American, and 18 of those counties are considered high food insecurity counties."

### Winnowing
This study will use the DOA data to find the counties that have the highest percentage of population beyond 20 miles from a supermarket and the percentage of people that meet that condition and have low income. It will also examine the highest percentage of housing units over 20 miles from a supermarket by county. The study will compare a list of the 28 counties in the US that are majority Native American to the DOA data for those counties, showing the breakdown of people that are over 20 miles from a supermarket, and compare it to others from the state and country.


## Core

### Discover
In line with the precondition, two tasks that the study wants to enable on the data is being able to compare the counts of a county statistic as compared to the other counties in the state and across the country.

- The task of comparing statistics for the counties across a state is to give accurate context since not all states have a county with a majority Native American population; in fact most don't. The task will be conducted by selecting for different attributes to compare, amongst low income, no car access, and total population that are beyond 20 miles away from a supermarket. This task should be able to show if the counties with majority Native American populations have any trends or extreme values. This could be used to provide lawmakers, lobbyists and concerned citizens with an increased awareness of help needed for native peoples. It may even show states or counties that are good examples of food accessibility.

- The task of comparing statistics for different counties across the country may show how the native american counties are very much on one end of the spectrum and examples of higher than average need. 

### Design
```{r, echo=FALSE}
alaska <- food_access %>%
  filter(state == "Alaska") %>%
  mutate(percentage_beyond_20 = (low_access_numbers_people_20_miles / population) * 100)
  
alaska %>%
  ggplot(aes(x = reorder(county, -percentage_beyond_20), y = percentage_beyond_20)) +
  geom_col(fill = "blue") +
  gghighlight::gghighlight(native_percent > 50.0) +
  labs(
    title="Example state graph",
    subtitle = "Alaska counties, majority Native American counties highlighted",
    y = "Percentage people living beyond 20 miles from a supermarket",
    x = "County"
    ) +
  coord_flip()


```

This is a prototype of one graph that could be generated by a user selecting attributes. Here for example, if the user had selected Alaska and the percentage of people living over 20 miles from a supermarket as the attribute, they could see a stark comparison of counties that are majority native occupying more spots in the higher percentages.

### Implement
Now for the full fledged interactive visualization, the data from the DOA is recreated as a JSON file and loaded into a chartJS chart whose parameters are adjusted by user selections from dropdowns.


### Deploy
As expected, looking through different attributes by state and across the country does show that majority Native American counties tend to have greater percentages of their population living over 20 miles from a supermarket, and in a few categories they actually mark the extreme highest. 


### Iterate
Looking at the data now that it's charted, more detail on distance from a supermarket is something I would want to investigate, instead of putting things into just counts of over 20 miles away or not, putting counts into bins of less than 1/2 mile, over 1/2 mile, over 1 mile, over 10 miles and over 20 miles. To accommodate this task I would break each bar into segments representing those bins, with their color filling the bar in a representative percentage of that county's population.


## Analysis

### Reflect
 - 
 - 

